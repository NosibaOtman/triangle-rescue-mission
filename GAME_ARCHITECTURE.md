# משימת הצלת המשולשים - ארכיטקטורת המשחק

## 1. סקירת המשחק

### מטרה פדגוגית
עזרת לתלמידי כיתה ז' להבין בעמקות את סיווג המשולשים לפי:
- **זוויות:** חד (acute), ישר (right), קהה (obtuse)
- **צלעות:** שונה צלעות (scalene), שווה שוקיים (isosceles), שווה צלעות (equilateral)

### נרטיב המשחק
תלמיד הוא "מומחה גיאומטריה" שנשלח למשימת הצלה. בכל שלב, משולש "תקוע" מחכה לסיווג נכון כדי להשתחרר. התלמיד חייב:
1. לזהות את סוג הזוויות
2. לזהות את סוג הצלעות
3. לקבל משוב מיידי וחינוכי

### מכניקות הליבה
- **לא ניתן להתקדם ללא תשובה נכונה** - אך הטעות לא מאפסת את המשחק
- **משוב אדפטיבי** - אם טעות, המשחק מסביר למה התשובה שגויה
- **קושי מתגבר** - משולשים בשלבים מאוחרים יותר מורכבים וממוקמים בזוויות לא סטנדרטיות
- **הצגה חזותית עשירה** - צבעים, אנימציות, סימונים ברורים

---

## 2. ארכיטקטורת הנתונים

### מודל המשולש

```typescript
interface Triangle {
  id: string;
  level: number; // 1-10
  
  // גיאומטריה
  vertices: [Point, Point, Point]; // קודקודים
  angles: [number, number, number]; // בדרגות
  sides: [number, number, number]; // אורכים יחסיים
  
  // סיווג
  angleType: 'acute' | 'right' | 'obtuse';
  sideType: 'scalene' | 'isosceles' | 'equilateral';
  
  // עיצוב
  rotation: number; // זווית סיבוב (מעלות)
  color: string; // צבע בסיס
  highlightColor: string; // צבע הדגשה
}

interface Point {
  x: number;
  y: number;
}
```

### מודל השלב (Level)

```typescript
interface GameLevel {
  id: string;
  levelNumber: number;
  triangle: Triangle;
  
  // הנחיות
  hint?: string;
  difficulty: 'easy' | 'medium' | 'hard';
  
  // משוב
  correctAnswers: {
    angleType: string;
    sideType: string;
  };
  
  // הנרטיב
  storyText: string; // "משולש זה תקוע! סווגו אותו..."
}
```

### מודל המשחק (Game State)

```typescript
interface GameState {
  currentLevelIndex: number;
  totalLevels: number;
  score: number;
  correctAnswers: number;
  incorrectAttempts: number;
  
  // מעקב אחרי ניסיונות בשלב הנוכחי
  currentAttempts: {
    angleGuess?: string;
    sideGuess?: string;
    isCorrect: boolean;
  }[];
  
  // הישגים
  achievements: string[];
}
```

---

## 3. זרימת המשחק (Game Flow)

### שלב 1: מסך פתיחה (Intro Screen)
- ברוכים הבאים למשימה
- הסבר קצר של המטרה
- כפתור "התחל משימה"

### שלב 2: הצגת השלב (Level Presentation)
1. משולש מופיע בתצוגה גדולה
2. סימונים ברורים (זוויות מסומנות, צלעות מסומנות)
3. טקסט נרטיבי: "משולש זה תקוע! סווגו אותו לפי זוויות וצלעות"

### שלב 3: בחירת התשובה (Answer Selection)
1. **סיווג לפי זוויות:**
   - 3 כפתורים: "חד (Acute)", "ישר (Right)", "קהה (Obtuse)"
   - כל כפתור מוצג עם איקון/דוגמה קטנה

2. **סיווג לפי צלעות:**
   - 3 כפתורים: "שונה צלעות (Scalene)", "שווה שוקיים (Isosceles)", "שווה צלעות (Equilateral)"

### שלב 4: משוב (Feedback)
- **אם נכון:**
  - אנימציה: משולש "נשחרר" / דלת נפתחת
  - הודעה חיובית: "כל הכבוד! סיווג נכון!"
  - ערך נקודות
  - התקדמות בתרשים המשימה

- **אם שגוי:**
  - אנימציה: משולש "רועד" / אזהרה
  - הודעה חינוכית:
    - "לא בדיוק. בואו נבדוק..."
    - הסבר מדוע התשובה שגויה
    - דוגמה או רמז
  - הזמנה לנסות שוב

### שלב 5: התקדמות (Progression)
- תרשים משימה מתעדכן (דלתות נפתחות, סרגל התקדמות עולה)
- מעבר לשלב הבא

### שלב 6: סיום (Completion)
- מסך סיום עם סיכום הישגים
- אפשרות לשחק שוב או לחזור לתפריט

---

## 4. מכניקות המשוב (Feedback System)

### משוב נכון
```
✓ כל הכבוד!
משולש זה הוא [סוג זוויות] ו-[סוג צלעות].
[הסבר קצר מדוע]
```

### משוב שגוי - דוגמה 1
```
✗ לא בדיוק...
אתה בחרת "חד", אבל משולש זה הוא "קהה".
בואו נבדוק: אחת הזוויות גדולה מ-90°.
נסה שוב!
```

### משוב שגוי - דוגמה 2
```
✗ טעות בסיווג צלעות
אתה בחרת "שונה צלעות", אבל שתי צלעות שוות!
זה משולש שווה שוקיים.
בואו נבדוק את האורכים...
```

### רמזים (Hints)
- מופיעים אחרי 2-3 ניסיונות שגויים
- מסומנים בצבע (זוויות בצבע אחד, צלעות בצבע אחר)
- לא חושפים את התשובה, רק מכוונים

---

## 5. קושי מתגבר (Difficulty Progression)

### שלבים 1-3 (קל - Easy)
- משולשים בכיוון סטנדרטי (בסיס אופקי)
- סוגים ברורים (למשל: משולש שווה צלעות ברור)
- זוויות וצלעות מסומנות בבירור

### שלבים 4-6 (בינוני - Medium)
- משולשים מסובבים בזוויות שונות
- סוגים פחות ברורים (למשל: שווה שוקיים עם זווית קהה)
- סימונים עדיין ברורים אך דורשים ניתוח

### שלבים 7-10 (קשה - Hard)
- משולשים בכיוונים שונים לחלוטין
- צירופים מורכבים (למשל: שווה צלעות חד)
- סימונים מינימליים, דורשים חישוב נפשי

---

## 6. ארכיטקטורת הקוד

### מבנה התיקיות
```
client/src/
├── pages/
│   └── Game.tsx              # עמוד המשחק הראשי
├── components/
│   ├── TriangleCanvas.tsx    # רינדור המשולש (SVG/Canvas)
│   ├── TriangleVisualizer.tsx # הצגת המשולש עם סימונים
│   ├── AnswerButtons.tsx     # כפתורי התשובות
│   ├── FeedbackPanel.tsx     # לוח המשוב
│   ├── ProgressBar.tsx       # סרגל התקדמות
│   ├── LevelIntro.tsx        # הצגת השלב
│   └── GameOver.tsx          # מסך הסיום
├── hooks/
│   ├── useGameState.ts       # ניהול מצב המשחק
│   ├── useTriangleGenerator.ts # יצירת משולשים
│   └── useFeedback.ts        # לוגיקת המשוב
├── lib/
│   ├── triangleClassifier.ts # לוגיקת סיווג
│   ├── triangleGeometry.ts   # חישובים גיאומטריים
│   └── gameData.ts           # נתוני השלבים
└── types/
    └── game.ts               # הגדרות TypeScript
```

### קומפוננטות מרכזיות

#### 1. TriangleVisualizer
- מקבל: Triangle object
- מוציא: SVG עם משולש, סימונים, תוויות
- תכונות:
  - הדגשה של זוויות (קשתות צבועות)
  - הדגשה של צלעות (קווים עבים)
  - תוויות (°, ס"מ יחסי)

#### 2. AnswerButtons
- מקבל: callback functions
- מוציא: 6 כפתורים (3 לזוויות, 3 לצלעות)
- תכונות:
  - משוב חזותי (hover, active states)
  - אפשרות לבחור שתי תשובות בזו אחר זו

#### 3. FeedbackPanel
- מקבל: feedback object
- מוציא: הודעה חינוכית
- תכונות:
  - צבע ירוק (נכון) או אדום (שגוי)
  - אנימציה של כניסה
  - כפתור "נסה שוב" או "המשך"

#### 4. ProgressBar
- מקבל: currentLevel, totalLevels
- מוציא: סרגל התקדמות חזותי
- תכונות:
  - אנימציה של התקדמות
  - תרשים משימה (דלתות נפתחות)

---

## 7. לוגיקת הסיווג (Classification Logic)

### סיווג לפי זוויות
```typescript
function classifyByAngles(angles: [number, number, number]): string {
  const maxAngle = Math.max(...angles);
  
  if (maxAngle < 90) return 'acute';
  if (maxAngle === 90) return 'right';
  if (maxAngle > 90) return 'obtuse';
}
```

### סיווג לפי צלעות
```typescript
function classifyBySides(sides: [number, number, number]): string {
  const sorted = sides.slice().sort((a, b) => a - b);
  const [a, b, c] = sorted;
  
  // שווה צלעות
  if (a === b && b === c) return 'equilateral';
  
  // שווה שוקיים
  if (a === b || b === c) return 'isosceles';
  
  // שונה צלעות
  return 'scalene';
}
```

---

## 8. יצירת משולשים (Triangle Generation)

### אלגוריתם יצירה
1. בחר סוג משולש (לפי רמת קושי)
2. יצור זוויות וצלעות שמתאימות לסוג
3. הוסף סיבוב אקראי (rotation)
4. בחר צבע מפלטה מוגדרת
5. בדוק תקינות (משולש חוקי)

### דוגמה: משולש שווה צלעות חד
```typescript
const triangle: Triangle = {
  id: 'level_5',
  level: 5,
  vertices: [[100, 50], [200, 50], [150, 150]],
  angles: [60, 60, 60],
  sides: [100, 100, 100],
  angleType: 'acute',
  sideType: 'equilateral',
  rotation: 45, // מסובב
  color: '#3B82F6',
  highlightColor: '#1E40AF'
};
```

---

## 9. מטריקות וניתוח

### מעקב ביצועים
- מספר ניסיונות לכל שלב
- זמן לכל שלב
- שיעור תשובות נכונות
- סוגי טעויות (זוויות vs צלעות)

### ניתוח למורה (אם תרחיב)
- איזה סוגי משולשים קשים לתלמיד?
- איזה טעויות חוזרות?
- האם הוא מתקדם?

---

## 10. טכנולוגיות

### Frontend
- **React 19** - ניהול מצב וקומפוננטות
- **TypeScript** - בטיחות סוגים
- **Tailwind CSS** - עיצוב
- **SVG** - רינדור משולשים בדיוק גבוה
- **Framer Motion** - אנימציות

### State Management
- **React Hooks** (useState, useEffect, useContext)
- **Custom Hooks** לניהול לוגיקה מורכבת

### Testing
- יחידות בדיקה לסיווג
- בדיקות אינטגרציה לזרימת המשחק

---

## 11. עקרונות עיצוב UX

### עקרון 1: Clarity (בהירות)
- סימונים ברורים של זוויות וצלעות
- טקסט פשוט ובר-הבנה
- צבעים קונסיסטנטיים

### עקרון 2: Feedback (משוב מיידי)
- כל פעולה מקבלת משוב חזותי
- משוב חינוכי, לא רק "נכון/לא נכון"

### עקרון 3: Progression (התקדמות)
- ברור כמה שלבים עברו וכמה נותרו
- הרגשה של הישג

### עקרון 4: Engagement (מעורבות)
- נרטיב משימת הצלה
- אנימציות שמעניינות אך לא מסיחות דעת
- הצלחות חוגגות

---

## 12. הערות פדגוגיות

### למה זה עובד?
1. **Conceptual Understanding** - תלמיד חייב להבין, לא רק לנחש
2. **Immediate Feedback** - למידה מחוזקת מיד
3. **Visual Learning** - משולשים בצבעים וסימונים
4. **Self-Paced** - כל תלמיד בקצב שלו
5. **No Penalty** - טעויות הן הזדמנויות ללמוד

### הבדלים בין יכולות
- תלמידים חלשים: שלבים קלים, סימונים ברורים, רמזים
- תלמידים חזקים: שלבים קשים, משולשים מורכבים, אתגר

---

## 13. סיכום

המשחק משלב:
- **פדגוגיה:** סיווג משולשים עם הבנה עמוקה
- **טכנולוגיה:** React, SVG, אנימציות
- **UX:** ברור, משוב מיידי, התקדמות חזותית
- **נרטיב:** משימת הצלה שמעניינת

התוצאה: משחק שמעזר לתלמידי כיתה ז' להבין גיאומטריה בצורה משמעותית ומעניינת.
